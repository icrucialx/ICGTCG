<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cru TCG Gacha</title>
  <style>
    @keyframes rainbow {
      0% { color: red; }
      16% { color: orange; }
      33% { color: yellow; }
      50% { color: green; }
      66% { color: blue; }
      83% { color: indigo; }
      100% { color: violet; }
    }

    @keyframes glow {
      0% { text-shadow: 0 0 5px red, 0 0 10px orange, 0 0 20px yellow, 0 0 30px green, 0 0 40px blue, 0 0 50px indigo, 0 0 60px violet; }
      100% { text-shadow: 0 0 5px violet, 0 0 10px indigo, 0 0 20px blue, 0 0 30px green, 0 0 40px yellow, 0 0 50px orange, 0 0 60px red; }
    }

    @keyframes glisten {
      0%, 100% { opacity: 0.9; filter: brightness(1); }
      50% { opacity: 1; filter: brightness(1.5); }
    }

    @keyframes sparkle {
      0% { box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
      50% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.8); }
      100% { box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
    }

    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: transparent;
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    h1 {
      margin-bottom: 20px;
      font-size: 3em;
      animation: rainbow 5s infinite, glow 5s infinite;
    }

    #result {
      margin-top: 30px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0px;
    }

    .card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 150px;
      height: 230;
      border: 2px solid #ccc;
      border-radius: 10px;
      background-color: transparent;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      position: relative;
      transform: scale(2) rotate(-10deg);
      opacity: 0;
      overflow: hidden;
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
      padding: 1px;
    }

    .card.show {
      transform: scale(1) rotate(0deg);
      opacity: 1;
      animation: reveal 0.5s ease-out;
    }

    .card img {
      width: 100%;
      height: 230px;
      border-radius: 1px 1px 0 0;
      max-height: 230px;
      background-color: transparent;
      animation: glisten 3s infinite;
    }

    .card.glow-common {
      animation: sparkle 3s infinite;
    }

    .card.glow-uncommon {
      animation: sparkle 3s infinite, glisten 3s infinite;
    }

    .card.glow-rare {
      animation: sparkle 2s infinite, glisten 3s infinite;
    }

    .card.glow-ultrarare {
      animation: sparkle 1.5s infinite, glisten 3s infinite;
    }

    .card.glow-secretrare {
      animation: sparkle 1s infinite, glisten 3s infinite;
    }

    .card .rarity {
      font-size: 14px;
      font-weight: bold;
      margin: 10px 0;
    }

    .card .name {
      font-size: 16px;
      font-weight: bold;
      text-align: center;
    }

    .rarity-common {
      color: gray;
    }

    .rarity-uncommon {
      color: green;
    }

    .rarity-rare {
      color: blue;
    }

    .rarity-ultrarare {
      color: purple;
    }

    .rarity-secretrare {
      color: gold;
    }

    .name-common {
      color: gray;
    }

    .name-uncommon {
      color: green;
    }

    .name-rare {
      color: blue;
    }

    .name-ultrarare {
      color: purple;
    }

    .name-secretrare {
      color: gold;
    }

    #summon-animation {
      display: none;
      margin-bottom: 20px;
    }

    @keyframes reveal {
      0% {
        opacity: 0;
        transform: scale(0.5) rotate(-10deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }
  </style>
</head>
<body>
  <h1>Cru TCG Gacha</h1>
  <div id="summon-animation">
    <img src="./images/summon-circle.gif" alt="Summoning Animation" style="width: 200px;">
  </div>
  <div id="result"></div>

  <script>
    const cardPool = {
      common: ["Pikachu", "Rattata", "Meowth"],
      uncommon: ["Charmeleon", "Wartortle", "Ivysaur"],
      rare: ["Charizard", "Blastoise", "Venusaur"],
      ultrarare: ["Shiny Charizard GX", "Rainbow Pikachu"],
      secretrare: ["Gold Mewtwo", "Alternate Art Lugia"]
    };

    const cardImages = {
      Pikachu: "./images/pikachu.png",
      Rattata: "./images/rattata.png",
      Meowth: "./images/meowth.png",
      Charmeleon: "./images/charmeleon.png",
      Wartortle: "./images/wartortle.png",
      Ivysaur: "./images/ivysaur.png",
      Charizard: "./images/charizard.png",
      Blastoise: "./images/blastoise.png",
      Venusaur: "./images/venusaur.png",
      "Shiny Charizard GX": "./images/shiny_charizard_gx.png",
      "Rainbow Pikachu": "./images/rainbow_pikachu.png",
      "Gold Mewtwo": "./images/gold_mewtwo.png",
      "Alternate Art Lugia": "./images/alternate_art_lugia.png"
    };

    const rarityWeights = {
      common: 60,
      uncommon: 25,
      rare: 10,
      ultrarare: 4,
      secretrare: 1
    };

    function weightedRandom(items, weights) {
      const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
      const random = Math.random() * totalWeight;
      let cumulativeWeight = 0;

      for (let i = 0; i < items.length; i++) {
        cumulativeWeight += weights[i];
        if (random < cumulativeWeight) {
          return items[i];
        }
      }
    }

    function playSound(soundFile) {
      const audio = new Audio(soundFile);
      audio.play();
    }

    // Pull a card on page load
    document.addEventListener("DOMContentLoaded", () => {
      pullCard();
    });

    function pullCard() {
      playSound('./sounds/pull.mp3');
      const summonAnimation = document.getElementById("summon-animation");
      summonAnimation.style.display = "block";

      setTimeout(() => {
        summonAnimation.style.display = "none";
        const rarities = Object.keys(rarityWeights);
        const weights = Object.values(rarityWeights);
        const chosenRarity = weightedRandom(rarities, weights);
        const card = cardPool[chosenRarity][Math.floor(Math.random() * cardPool[chosenRarity].length)];

        if (chosenRarity === 'rare') playSound('./sounds/rare.mp3');
        if (chosenRarity === 'ultrarare') playSound('./sounds/ultra_rare.mp3');
        if (chosenRarity === 'secretrare') playSound('./sounds/secret_rare.mp3');

        displayCard(card, chosenRarity);
      }, 2000);
    }

    function displayCard(card, rarity) {
      const resultDiv = document.getElementById("result");
      const cardDiv = document.createElement("div");
      cardDiv.className = "card show";

      const glowClasses = {
