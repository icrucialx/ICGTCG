<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cru TCG Gacha</title>
  <style>
  
    @keyframes rainbow {
  0% { color: red; }
  16% { color: orange; }
  33% { color: yellow; }
  50% { color: green; }
  66% { color: blue; }
  83% { color: indigo; }
  100% { color: violet; }
}

@keyframes glow {
  0% { text-shadow: 0 0 5px red, 0 0 10px orange, 0 0 20px yellow, 0 0 30px green, 0 0 40px blue, 0 0 50px indigo, 0 0 60px violet; }
  100% { text-shadow: 0 0 5px violet, 0 0 10px indigo, 0 0 20px blue, 0 0 30px green, 0 0 40px yellow, 0 0 50px orange, 0 0 60px red; }
}

@keyframes glisten-animation {
  0% { transform: translate(-150%, -150%) rotate(25deg); }
  100% { transform: translate(150%, 150%) rotate(25deg); }
}

@keyframes sparkle-animation {
  0%, 100% { background-position: 50% 50%; opacity: 0.8; transform: scale(1); }
  50% { background-position: 75% 75%; opacity: 1; transform: scale(1.1); }
}

@keyframes zoomIn {
  0% {
    transform: scale(1);
    z-index: 1;
  }
  50% {
    transform: scale(1.25);
    z-index: 10;
  }
  100% {
    transform: scale(1);
    z-index: 1;
  }
}

@keyframes shimmer {
  0% { background-position: -200%; }
  100% { background-position: 200%; }
}

body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin: 0;
  padding: 0;
  background: transparent;
  color: white;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

h1 {
  margin-bottom: 20px;
  font-size: 3em;
  animation: rainbow 5s infinite, glow 5s infinite;
}

#result {
  margin-top: 30px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
}

.card {
  perspective: 1000px;
  width: 250px;
  height: 350px;
  position: relative;
  display: inline-block;
  margin: 10px;
  border: none; /* Hide border initially */
  box-shadow: none;
  transition: border-color 0.5s ease, transform 1s ease;
  overflow: hidden;
}

.card.show {
  border: 3px solid; /* Reveal border on flip */
}

.card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform 1s ease-in-out;
  transform: rotateY(180deg);
}

.card-inner {
  transform: rotateY(0deg); /* Starts with the back side visible */
}

.card.show .card-inner {
  transform: rotateY(180deg); /* Flips to reveal the front */
}

.card-front,
.card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 10px;
}

.card-back {
  background-image: url('./images/card-back.png');
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotateY(0deg);
}

.card-front {
  background-color: white;
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

.card-front img {
  width: 100%;
  height: auto;
  border-radius: 10px 10px 0 0;
}

.rarity {
  margin: 10px 0;
  font-size: 16px;
  font-weight: bold;
  text-align: center;
}

.name {
  font-size: 14px;
  text-align: center;
  font-weight: bold;
}

@keyframes borderPulse {
  0% {
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.6);
  }
  100% {
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
  }
}

/* Common Cards */
.card.show.glow-common {
  border: 2px solid gray;
  animation: borderPulse 3s infinite ease-in-out;
  box-shadow: 0 0 10px rgba(128, 128, 128, 0.5);
}

/* Uncommon Cards */
.card.show.glow-uncommon {
  border: 2px solid green;
  animation: borderPulse 3s infinite ease-in-out;
  box-shadow: 0 0 15px rgba(0, 128, 0, 0.5);
}

/* Rare Cards */
.card.show.glow-rare {
  border: 2px solid blue;
  animation: borderPulse 3s infinite ease-in-out;
  box-shadow: 0 0 20px rgba(0, 0, 255, 0.5);
  position: relative;
  overflow: hidden;
}

.card.show.glow-rare:before {
  content: "";
  position: absolute;
  top: -150%;
  left: -150%;
  width: 300%;
  height: 300%;
  background: linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.4) 0%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 255, 255, 0.4) 100%
  );
  transform: rotate(25deg);
  opacity: 0.7;
  pointer-events: none;
  animation: glisten-animation 3s infinite linear;
}

/* Ultra Rare Cards */
.card.show.glow-ultrarare {
  border: 3px solid purple;
  animation: borderPulse 3s infinite ease-in-out, shimmer 3s infinite;
  box-shadow: 0 0 30px rgba(128, 0, 128, 0.7), 0 0 50px rgba(128, 0, 128, 0.5);
  background: linear-gradient(45deg, #ff9, #f09, #90f);
  background-size: 400%;
  position: relative;
  overflow: hidden;
}

.card.show.glow-ultrarare:after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.7) 10%, rgba(255, 255, 255, 0) 70%);
  opacity: 0.8;
  pointer-events: none;
  animation: sparkle-animation 1.5s infinite ease-in-out;
}

/* Secret Rare Cards */
.card.show.glow-secretrare {
  border: 3px solid gold;
  animation: borderPulse 3s infinite ease-in-out, shimmer 3s infinite;
  box-shadow: 0 0 40px rgba(255, 215, 0, 0.7), 0 0 60px rgba(255, 215, 0, 0.5);
  background: linear-gradient(45deg, #fff8b5, #ffe39f, #ffdfa8);
  background-size: 400%;
  position: relative;
  overflow: hidden;
}

.card.show.glow-secretrare:after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 10%, rgba(255, 255, 255, 0) 70%);
  opacity: 0.9;
  pointer-events: none;
  animation: sparkle-animation 1.5s infinite ease-in-out;
}

/* Zoom Effect */
.card.zoom {
  animation: zoomIn 3.5s forwards;
}


  </style>
</head>
<body>
  <h1>ReCRUit</h1>
  
  <div id="result"></div>

  <!-- Audio Tags for Sounds -->
  <audio id="common-sound" src="./sounds/common.mp3"></audio>
  <audio id="uncommon-sound" src="./sounds/uncommon.mp3"></audio>
  <audio id="rare-sound" src="./sounds/rare.mp3"></audio>
  <audio id="ultrarare-sound" src="./sounds/ultrarare.mp3"></audio>
  <audio id="secretrare-sound" src="./sounds/secretrare.mp3"></audio>
  <audio id="summon-sound" src="./sounds/summon.mp3"></audio>
</body>
  
  <script>
  
const cardPool = {
  common: [
    "Pidgey", "Rattata", "Zubat", "Caterpie", "Weedle", "Spearow", "Sandshrew", 
    "Poliwag", "Geodude", "Krabby", "Oddish", "Paras", "Diglett", "Ekans", 
    "NidoranF", "NidoranM", "Magnemite", "Meowth", "Pikachu", "Voltorb", 
    "Poliwhirl", "Bellsprout", "Tentacool", "Slowpoke", "Shellder", "Drowzee", 
    "Krabby", "Horsea", "Staryu", "Doduo", "Seel", "Grimer", "Koffing", 
    "Rhyhorn", "Cubone", "Lickitung", "Tangela", "Kangaskhan", "Ponyta", 
    "Magnemite", "Goldeen", "Staryu", "Exeggcute", "Cleffa", "Igglybuff", 
    "Togepi", "Hoothoot", "Sentret", "Wooper", "Mareep", "Slugma", "Snubbull", 
    "Remoraid", "Swinub", "Phanpy", "Seedot", "Lotad", "Shroomish", "Wingull", 
    "Surskit", "Baltoy", "Barboach", "Electrike", "Spoink", "Numel", 
    "Cacnea", "Snorunt", "Meditite", "Swablu", "Spheal", "Clamperl", 
    "Shuppet", "Duskull", "Chimecho", "Gulpin", "Trapinch", "Cranidos", 
    "Shieldon", "Combee", "Cherubi", "Buizel", "Bidoof", "Kricketot", 
    "Shellos", "Croagunk", "Bronzor", "Happiny", "Chatot", "Spiritomb", 
    "Gible", "Glameow", "Purrloin", "Pidove", "Drilbur", "Timburr", "Venipede", 
    "Dwebble", "Scraggy", "Foongus"
  ],
  uncommon: [
    "Butterfree", "Beedrill", "Pidgeotto", "Raticate", "Fearow", "Clefairy", 
    "Jigglypuff", "Golbat", "Gloom", "Venonat", "Dugtrio", "Persian", "Goldeen", 
    "Seaking", "Primeape", "Growlithe", "Machoke", "Kadabra", "Haunter", 
    "Wartortle", "Charmeleon", "Ivysaur", "Flaaffy", "Bayleef", "Quilava", 
    "Noctowl", "Ariados", "Ledian", "Xatu", "Murkrow", "Piloswine", "Corsola", 
    "Misdreavus", "Girafarig", "Delibird", "Sneasel", "Donphan", "Lanturn", 
    "Mantine", "Sunflora", "Houndour", "Skiploom", "Pupitar", "Lombre", 
    "Nuzleaf", "Swellow", "Masquerain", "Pelipper", "Breloom", "Vibrava", 
    "Roselia", "Whiscash", "Camerupt", "Manectric", "Banette", "Dusclops", 
    "Tropius", "Lunatone", "Solrock", "Sealeo", "Huntail", "Gorebyss", 
    "Luvdisc", "Shelgon", "Gabite", "Staravia", "Luxio", "Monferno", "Prinplup", 
    "Grotle", "Bibarel", "Pachirisu", "Drifloon", "Mismagius", "Honchkrow", 
    "Hippopotas", "Skuntank", "Finneon", "Mantyke", "Snover", "Gabite", 
    "Froslass", "Servine", "Dewott", "Pignite", "Tranquill", "Watchog", 
    "Boldore", "Swoobat", "Zebstrika", "Palpitoad", "Whirlipede", "Swadloon", 
    "Whimsicott", "Petilil", "Lilligant", "Krokorok", "Maractus", "Zoroark"
  ],
  rare: [
    "Charizard", "Blastoise", "Venusaur", "Gengar", "Dragonite", "Alakazam", 
    "Machamp", "Lapras", "Arcanine", "Rhydon", "Nidoking", "Nidoqueen", 
    "Gyarados", "Clefable", "Poliwrath", "Vileplume", "Victreebel", "Tentacruel", 
    "Rapidash", "Hypno", "Chansey", "Electabuzz", "Magmar", "Jynx", "Pinsir", 
    "Scyther", "Starmie", "Kingler", "Electrode", "Exeggutor", "Marowak", 
    "Weezing", "Hitmonchan", "Hitmonlee", "Snorlax", "Ditto", 
    "Aerodactyl", "Kabutops", "Omastar", "Articuno", "Zapdos", "Moltres", 
    "Typhlosion", "Feraligatr", "Meganium", "Ampharos", "Espeon", "Umbreon", 
    "Steelix", "Crobat", "Forretress", "Houndoom", "Kingdra", "Blissey", 
    "Scizor", "Heracross", "Tyranitar", "Lugia", "HoOh", "Raikou", "Entei", 
    "Suicune", "Sceptile", "Blaziken", "Swampert", "Metagross", "Salamence", 
    "Flygon", "Walrein", "Claydol", "Milotic", "Altaria", "Gardevoir", "Absol", 
    "Regirock", "Regice", "Registeel", "Latias", "Latios", "Jirachi", "Deoxys", 
    "Torterra", "Infernape", "Empoleon", "Roserade", "Luxray", "Rampardos", 
    "Bastiodon", "Drapion", "Togekiss", "Magnezone", "Rhyperior", "Electivire", 
    "Magmortar", "Gallade", "Yanmega", "Gliscor", "Mamoswine"
  ],
ultrarare: [
  "Shiny Charizard GX", "Rainbow Pikachu", "Mega Lucario",
  "Shiny Umbreon", "Shiny Gyarados", "Primal Kyogre",
  "Shiny Rayquaza", "Shiny Metagross", "Shiny Tyranitar",
  "Shiny Greninja", "Shiny Eevee", "Shiny Mew",
  "Shiny Hooh", "Shiny Lugia", "Shiny Latios",
  "Shiny Latias", "Shiny Celebi", "Shiny Jirachi",
  "Shiny Zygarde", "Shiny Reshiram", "Shiny Zekrom"
],
secretrare: [
  "Gold Mewtwo", "Alternate Art Lugia", "Gold Zacian", "Rainbow Eternatus",
  "Gold Reshiram", "Rainbow Zekrom", "Gold Dialga", "Gold Palkia", "Gold Giratina", "Gold Arceus",
  "Gold Kyogre", "Gold Groudon", "Gold Rayquaza", "Rainbow Charizard", 
  "Gold Solgaleo", "Gold Lunala", "Gold Necrozma", "Rainbow Blastoise",
  "Rainbow Venusaur", "Gold Eternatus", "Rainbow Kyurem", "Gold Xerneas",
  "Gold Yveltal", "Gold Tapu Koko", "Gold Tapu Lele", "Gold Tapu Bulu", "Gold Tapu Fini"
],
};

const cardImages = {
  // Common Pokémon
  Pidgey: "./images/pidgey.png",
  Rattata: "./images/rattata.png",
  Zubat: "./images/zubat.png",
  Caterpie: "./images/caterpie.png",
  Weedle: "./images/weedle.png",
  Spearow: "./images/spearow.png",
  Sandshrew: "./images/sandshrew.png",
  Poliwag: "./images/poliwag.png",
  Geodude: "./images/geodude.png",
  Krabby: "./images/krabby.png",
  Oddish: "./images/oddish.png",
  Paras: "./images/paras.png",
  Diglett: "./images/diglett.png",
  Ekans: "./images/ekans.png",
  NidoranF: "./images/nidoranf.png",
  NidoranM: "./images/nidoranm.png",
  Magnemite: "./images/magnemite.png",
  Meowth: "./images/meowth.png",
  Pikachu: "./images/pikachu.png",
  Voltorb: "./images/voltorb.png",
  Poliwhirl: "./images/poliwhirl.png",
  Bellsprout: "./images/bellsprout.png",
  Tentacool: "./images/tentacool.png",
  Slowpoke: "./images/slowpoke.png",
  Shellder: "./images/shellder.png",
  Drowzee: "./images/drowzee.png",
  Horsea: "./images/horsea.png",
  Staryu: "./images/staryu.png",
  Doduo: "./images/doduo.png",
  Seel: "./images/seel.png",
  Grimer: "./images/grimer.png",
  Koffing: "./images/koffing.png",
  Rhyhorn: "./images/rhyhorn.png",
  Cubone: "./images/cubone.png",
  Lickitung: "./images/lickitung.png",
  Tangela: "./images/tangela.png",
  Kangaskhan: "./images/kangaskhan.png",
  Ponyta: "./images/ponyta.png",
  Exeggcute: "./images/exeggcute.png",
  Cleffa: "./images/cleffa.png",
  Igglybuff: "./images/igglybuff.png",
  Togepi: "./images/togepi.png",
  Hoothoot: "./images/hoothoot.png",
  Sentret: "./images/sentret.png",
  Wooper: "./images/wooper.png",
  Mareep: "./images/mareep.png",
  Slugma: "./images/slugma.png",
  Snubbull: "./images/snubbull.png",
  Remoraid: "./images/remoraid.png",
  Swinub: "./images/swinub.png",
  Phanpy: "./images/phanpy.png",
  Seedot: "./images/seedot.png",
  Lotad: "./images/lotad.png",
  Shroomish: "./images/shroomish.png",
  Wingull: "./images/wingull.png",
  Surskit: "./images/surskit.png",
  Baltoy: "./images/baltoy.png",
  Barboach: "./images/barboach.png",
  Electrike: "./images/electrike.png",
  Spoink: "./images/spoink.png",
  Numel: "./images/numel.png",
  Cacnea: "./images/cacnea.png",
  Snorunt: "./images/snorunt.png",
  Meditite: "./images/meditite.png",
  Swablu: "./images/swablu.png",
  Spheal: "./images/spheal.png",
  Clamperl: "./images/clamperl.png",
  Shuppet: "./images/shuppet.png",
  Duskull: "./images/duskull.png",
  Chimecho: "./images/chimecho.png",
  Gulpin: "./images/gulpin.png",
  Trapinch: "./images/trapinch.png",
  Cranidos: "./images/cranidos.png",
  Shieldon: "./images/shieldon.png",
  Combee: "./images/combee.png",
  Cherubi: "./images/cherubi.png",
  Buizel: "./images/buizel.png",
  Bidoof: "./images/bidoof.png",
  Kricketot: "./images/kricketot.png",
  Shellos: "./images/shellos.png",
  Croagunk: "./images/croagunk.png",
  Bronzor: "./images/bronzor.png",
  Happiny: "./images/happiny.png",
  Chatot: "./images/chatot.png",
  Spiritomb: "./images/spiritomb.png",
  Gible: "./images/gible.png",
  Glameow: "./images/glameow.png",
  Purrloin: "./images/purrloin.png",
  Pidove: "./images/pidove.png",
  Drilbur: "./images/drilbur.png",
  Timburr: "./images/timburr.png",
  Venipede: "./images/venipede.png",
  Dwebble: "./images/dwebble.png",
  Scraggy: "./images/scraggy.png",
  Foongus: "./images/foongus.png",

  // Uncommon Pokémon
  Butterfree: "./images/butterfree.png",
  Beedrill: "./images/beedrill.png",
  Pidgeotto: "./images/pidgeotto.png",
  Raticate: "./images/raticate.png",
  Fearow: "./images/fearow.png",
  Clefairy: "./images/clefairy.png",
  Jigglypuff: "./images/jigglypuff.png",
  Golbat: "./images/golbat.png",
  Gloom: "./images/gloom.png",
  Venonat: "./images/venonat.png",
  Dugtrio: "./images/dugtrio.png",
  Persian: "./images/persian.png",
  Seaking: "./images/seaking.png",
  Primeape: "./images/primeape.png",
  Growlithe: "./images/growlithe.png",
  Machoke: "./images/machoke.png",
  Kadabra: "./images/kadabra.png",
  Haunter: "./images/haunter.png",
  Wartortle: "./images/wartortle.png",
  Charmeleon: "./images/charmeleon.png",
  Ivysaur: "./images/ivysaur.png",
  Flaaffy: "./images/flaaffy.png",
  Bayleef: "./images/bayleef.png",
  Quilava: "./images/quilava.png",
  Noctowl: "./images/noctowl.png",
  Ariados: "./images/ariados.png",
  Ledian: "./images/ledian.png",
  Xatu: "./images/xatu.png",
  Murkrow: "./images/murkrow.png",
  Piloswine: "./images/piloswine.png",
  Corsola: "./images/corsola.png",
  Misdreavus: "./images/misdreavus.png",
  Girafarig: "./images/girafarig.png",
  Delibird: "./images/delibird.png",
  Sneasel: "./images/sneasel.png",
  Donphan: "./images/donphan.png",
  Lanturn: "./images/lanturn.png",
  Mantine: "./images/mantine.png",
  Sunflora: "./images/sunflora.png",
  Houndour: "./images/houndour.png",
  Skiploom: "./images/skiploom.png",
  Pupitar: "./images/pupitar.png",
  Lombre: "./images/lombre.png",
  Nuzleaf: "./images/nuzleaf.png",
  Swellow: "./images/swellow.png",
  Masquerain: "./images/masquerain.png",
  Pelipper: "./images/pelipper.png",
  Breloom: "./images/breloom.png",
  Vibrava: "./images/vibrava.png",
  Roselia: "./images/roselia.png",
  Whiscash: "./images/whiscash.png",
  Camerupt: "./images/camerupt.png",
  Manectric: "./images/manectric.png",
  Banette: "./images/banette.png",
  Dusclops: "./images/dusclops.png",
  Tropius: "./images/tropius.png",
  Lunatone: "./images/lunatone.png",
  Solrock: "./images/solrock.png",
  Sealeo: "./images/sealeo.png",
  Huntail: "./images/huntail.png",
  Gorebyss: "./images/gorebyss.png",
  Luvdisc: "./images/luvdisc.png",
  Shelgon: "./images/shelgon.png",
  Gabite: "./images/gabite.png",
  Staravia: "./images/staravia.png",
  Luxio: "./images/luxio.png",
  Monferno: "./images/monferno.png",
  Prinplup: "./images/prinplup.png",
  Grotle: "./images/grotle.png",
  Bibarel: "./images/bibarel.png",
  Pachirisu: "./images/pachirisu.png",
  Drifloon: "./images/drifloon.png",
  Mismagius: "./images/mismagius.png",
  Honchkrow: "./images/honchkrow.png",
  Hippopotas: "./images/hippopotas.png",
  Skunktank: "./images/skunktank.png",
  Finneon: "./images/finneon.png",
  Mantyke: "./images/mantyke.png",
  Snover: "./images/snover.png",
  Gabite: "./images/gabite.png",
  Froslass: "./images/froslass.png",
  Servine: "./images/servine.png",
  Dewott: "./images/dewott.png",
  Pignite: "./images/pignite.png",
  Tranquill: "./images/tranquill.png",
  Watchog: "./images/watchog.png",
  Boldore: "./images/boldore.png",
  Swoobat: "./images/swoobat.png",
  Zebstrika: "./images/zebstrika.png",
  Palpitoad: "./images/palpitoad.png",
  Whirlipede: "./images/whirlipede.png",
  Swadloon: "./images/swadloon.png",
  Whimsicott: "./images/whimsicott.png",
  Petilil: "./images/petilil.png",
  Lilligant: "./images/lilligant.png",
  Krokorok: "./images/krokorok.png",
  Maractus: "./images/maractus.png",
  Zoroark: "./images/zoroark.png",

  // Rare Pokémon
  Charizard: "./images/charizard.png",
  Blastoise: "./images/blastoise.png",
  Venusaur: "./images/venusaur.png",
  Gengar: "./images/gengar.png",
  Dragonite: "./images/dragonite.png",
  Alakazam: "./images/alakazam.png",
  Machamp: "./images/machamp.png",
  Lapras: "./images/lapras.png",
  Arcanine: "./images/arcanine.png",
  Rhydon: "./images/rhydon.png",
  Nidoking: "./images/nidoking.png",
  Nidoqueen: "./images/nidoqueen.png",
  Gyarados: "./images/gyarados.png",
  Clefable: "./images/clefable.png",
  Poliwrath: "./images/poliwrath.png",
  Vileplume: "./images/vileplume.png",
  Victreebel: "./images/victreebel.png",
  Tentacruel: "./images/tentacruel.png",
  Rapidash: "./images/rapidash.png",
  Hypno: "./images/hypno.png",
  Chansey: "./images/chansey.png",
  Electabuzz: "./images/electabuzz.png",
  Magmar: "./images/magmar.png",
  Jynx: "./images/jynx.png",
  Pinsir: "./images/pinsir.png",
  Scyther: "./images/scyther.png",
  Starmie: "./images/starmie.png",
  Kingler: "./images/kingler.png",
  Electrode: "./images/electrode.png",
  Weezing: "./images/weezing.png",
  Hitmonchan: "./images/hitmonchan.png",
  Hitmonlee: "./images/hitmonlee.png",
  Snorlax: "./images/snorlax.png",
  Ditto: "./images/ditto.png",
  Aerodactyl: "./images/aerodactyl.png",
  Kabutops: "./images/kabutops.png",
  Omastar: "./images/omastar.png",
  Articuno: "./images/articuno.png",
  Zapdos: "./images/zapdos.png",
  Moltres: "./images/moltres.png",
  Typhlosion: "./images/typhlosion.png",
  Feraligatr: "./images/feraligatr.png",
  Meganium: "./images/meganium.png",
  Ampharos: "./images/ampharos.png",
  Espeon: "./images/espeon.png",
  Umbreon: "./images/umbreon.png",
  Steelix: "./images/steelix.png",
  Crobat: "./images/crobat.png",
  Forretress: "./images/forretress.png",
  Houndoom: "./images/houndoom.png",
  Kingdra: "./images/kingdra.png",
  Blissey: "./images/blissey.png",
  Scizor: "./images/scizor.png",
  Heracross: "./images/heracross.png",
  Tyranitar: "./images/tyranitar.png",
  Lugia: "./images/lugia.png",
  Hooh: "./images/hooh.png",
  Raikou: "./images/raikou.png",
  Entei: "./images/entei.png",
  Suicune: "./images/suicune.png",
  Sceptile: "./images/sceptile.png",
  Blaziken: "./images/blaziken.png",
  Swampert: "./images/swampert.png",
  Metagross: "./images/metagross.png",
  Salamence: "./images/salamence.png",
  Flygon: "./images/flygon.png",
  Walrein: "./images/walrein.png",
  Claydol: "./images/claydol.png",
  Milotic: "./images/milotic.png",
  Altaria: "./images/altaria.png",
  Gardevoir: "./images/gardevoir.png",
  Absol: "./images/absol.png",
  Regirock: "./images/regirock.png",
  Regice: "./images/regice.png",
  Registeel: "./images/registeel.png",
  Latias: "./images/latias.png",
  Latios: "./images/latios.png",
  Jirachi: "./images/jirachi.png",
  Deoxys: "./images/deoxys.png",
  Torterra: "./images/torterra.png",
  Infernape: "./images/infernape.png",
  Empoleon: "./images/empoleon.png",
  Roserade: "./images/roserade.png",
  Luxray: "./images/luxray.png",
  Rampardos: "./images/rampardos.png",
  Bastiodan: "./images/bastiodan.png",
  Drapion: "./images/drapion.png",
  Togekiss: "./images/togekiss.png",
  Magnezone: "./images/magnezone.png",
  Rhyperior: "./images/rhyperior.png",
  Electivire: "./images/electivire.png",
  Magmortar: "./images/magmortar.png",
  Yanmega: "./images/yanmega.png",
  Gliscor: "./images/gliscor.png",
  Mamoswine: "./images/mamoswine.png",

  // Ultra Rare and Secret Rare (unchanged)
  "Shiny Charizard GX": "./images/shiny_charizard_gx.png",
  "Rainbow Pikachu": "./images/rainbow_pikachu.png",
  "Mega Lucario": "./images/mega_lucario.png",
  "Shiny Umbreon": "./images/shiny_umbreon.png",
  "Shiny Gyarados": "./images/shiny_gyarados.png",
  "Primal Kyogre": "./images/primal_kyogre.png",
  "Shiny Rayquaza": "./images/shiny_rayquaza.png",
  "Shiny Metagross": "./images/shiny_metagross.png",
  "Shiny Tyranitar": "./images/shiny_tyranitar.png",
  "Shiny Greninja": "./images/shiny_greninja.png",
  "Shiny Eevee": "./images/shiny_eevee.png",
  "Shiny Mew": "./images/shiny_mew.png",
  "Shiny Hooh": "./images/shiny_hooh.png",
  "Shiny Lugia": "./images/shiny_lugia.png",
  "Shiny Latios": "./images/shiny_latios.png",
  "Shiny Latias": "./images/shiny_latias.png",
  "Shiny Celebi": "./images/shiny_celebi.png",
  "Shiny Jirachi": "./images/shiny_jirachi.png",
  "Shiny Zygarde": "./images/shiny_zygarde.png",
  "Shiny Reshiram": "./images/shiny_reshiram.png",
  "Shiny Zekrom": "./images/shiny_zekrom.png",
  "Gold Mewtwo": "./images/gold_mewtwo.png",
  "Alternate Art Lugia": "./images/alternate_art_lugia.png",
  "Gold Zacian": "./images/gold_zacian.png",
  "Rainbow Eternatus": "./images/rainbow_eternatus.png",
  "Gold Reshiram": "./images/gold_reshiram.png",
  "Rainbow Zekrom": "./images/rainbow_zekrom.png",
  "Gold Dialga": "./images/gold_dialga.png",
  "Gold Palkia": "./images/gold_palkia.png",
  "Gold Giratina": "./images/gold_giratina.png",
  "Gold Arceus": "./images/gold_arceus.png",
  "Gold Rayquaza": "./images/gold_rayquaza.png",
  "Rainbow Charizard": "./images/rainbow_charizard.png",
  "Gold Solgaleo": "./images/gold_solgaleo.png",
  "Rainbow Lunala": "./images/rainbow_lunala.png",
  "Gold Necrozma": "./images/gold_necrozma.png",
  "Rainbow Blastoise": "./images/rainbow_blastoise.png",
  "Rainbow Venusaur": "./images/rainbow_venusaur.png",
  "Gold Eternatus": "./images/gold_eternatus.png",
  "Rainbow Kyurem": "./images/rainbow_kyurem.png",
  "Gold Xerneas": "./images/gold_xerneas.png",
  "Gold Yveltal": "./images/gold_yveltal.png",
  "Gold Tapu Koko": "./images/gold_tapu_koko.png",
  "Gold Tapu Lele": "./images/gold_tapu_lele.png",
  "Gold Tapu Bulu": "./images/gold_tapu_bulu.png",
  "Gold Tapu Fini": "./images/gold_tapu_fini.png",
};


    const cardsUrl = "https://raw.githubusercontent.com/icrucialx/tcg-gacha-database/main/cards.json";
    const backendUrl = "https://icrucialtcg.onrender.com";

    
    const rarityWeights = {
      common: 50,
      uncommon: 30,
      rare: 15,
      ultrarare: 4,
      secretrare: 1
    };

    async function fetchCards() {
    try {
        const response = await fetch(`${backendUrl}/cards`);
        const cards = await response.json();
        console.log("Fetched cards:", cards);
        return cards;
    } catch (error) {
        console.error("Error fetching cards:", error);
    }
}

    async function logPull(cardName, rarity) {
    try {
        const response = await fetch(`${backendUrl}/pulls`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ card_name: cardName, rarity: rarity }),
        });
        const result = await response.json();
        console.log("Logged pull:", result);
    } catch (error) {
        console.error("Error logging pull:", error);
    }
}

    async function recordPull(cardName, rarity) {
    await fetch('https://icrucialtcg.onrender.com/pulls', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ card_name: cardName, rarity: rarity }),
    });
}
    
    function weightedRandom(items, weights) {
      const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
      const random = Math.random() * totalWeight;
      let cumulativeWeight = 0;

      for (let i = 0; i < items.length; i++) {
        cumulativeWeight += weights[i];
        if (random < cumulativeWeight) {
          return items[i];
        }
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      drawThreeCards();
    });

    function playSound(id) {
      const audio = document.getElementById(id);
      if (audio) {
        audio.currentTime = 0; // Reset the audio to the start
        audio.play().catch((err) => {
          console.error(`Error playing sound for ID: ${id}`, err);
        });
      }
    }

function drawCards() {
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = ""; // Clear previous cards

  // Play summon sound before drawing cards
  playSound("summon-sound");

  const pulledCards = []; // Store pulled cards for logging

  for (let i = 0; i < 3; i++) {
    const rarities = Object.keys(rarityWeights);
    const weights = Object.values(rarityWeights);
    const chosenRarity = weightedRandom(rarities, weights);
    const cardName =
      cardPool[chosenRarity][
        Math.floor(Math.random() * cardPool[chosenRarity].length)
      ];

    // Create card container
    const cardDiv = document.createElement("div");
    cardDiv.className = `card glow-${chosenRarity}`; // Apply glow class dynamically

    // Add glistening and sparkling effects for specific rarities
    if (chosenRarity === "ultrarare" || chosenRarity === "secretrare") {
      cardDiv.classList.add("sparkle-effect");
    } else if (chosenRarity === "rare") {
      cardDiv.classList.add("glisten-effect");
    }

    // Create card inner container
    const cardInner = document.createElement("div");
    cardInner.className = "card-inner";

    // Create card back
    const cardBack = document.createElement("div");
    cardBack.className = "card-back";
    cardBack.innerHTML = "<p></p>";

    // Create card front
    const cardFront = document.createElement("div");
    cardFront.className = "card-front";

    const img = document.createElement("img");
    img.src = cardImages[cardName] || "./images/default.png";

    const rarityDiv = document.createElement("div");
    rarityDiv.className = "rarity";
    rarityDiv.innerText = chosenRarity.toUpperCase();

    const nameDiv = document.createElement("div");
    nameDiv.className = "name";
    nameDiv.innerText = cardName;

    // Append elements
    cardFront.appendChild(img);
    cardFront.appendChild(rarityDiv);
    cardFront.appendChild(nameDiv);

    cardInner.appendChild(cardBack);
    cardInner.appendChild(cardFront);
    cardDiv.appendChild(cardInner);
    resultDiv.appendChild(cardDiv);

    // Store pulled card for logging
    pulledCards.push({ card_name: cardName, rarity: chosenRarity });

    // Play rarity sound after drawing card
    setTimeout(() => {
      playSound(`${chosenRarity}-sound`);
    }, i * 1500);

    // Add show class to flip cards after a delay
    setTimeout(() => {
      cardDiv.classList.add("show");
      if (chosenRarity === "ultrarare" || chosenRarity === "secretrare") {
        setTimeout(() => {
          cardDiv.classList.add("zoom");
        }, 1000); // Zoom in after reveal
      }
    }, i * 1500); // Delay each flip
  }

  // Log all pulled cards to the backend
  pulledCards.forEach(async (card) => {
    await logPull(card.card_name, card.rarity);
  });
}

document.addEventListener("DOMContentLoaded", drawCards);

  </script>
</body>
</html>
